# 測試修復指南

## 測試失敗分析（第一輪）

### 失敗統計
- 總測試數：1453 個
- 失敗測試：94 個
- 主要失敗模組：
  - IndexEngine 配置驗證（18 個）
  - MoveService import 更新（5 個）
  - 效能測試（多個模組）
  - Edge cases 測試（多個模組）

## 修復策略

### 第一輪：核心功能修復
#### 1. IndexEngine 配置驗證問題
- **問題**：配置驗證邏輯不正確
- **修復方案**：
  - 檢查配置驗證邏輯
  - 修正型別檢查
  - 確保邊界條件處理

#### 2. MoveService Import 路徑更新
- **問題**：Import 路徑更新邏輯錯誤
- **修復方案**：
  - 檢查路徑解析邏輯
  - 修正路徑匹配算法
  - 處理複雜 import 情況

#### 3. TextSearchEngine 基本搜尋
- **問題**：基本搜尋功能失敗
- **修復方案**：
  - 檢查搜尋邏輯
  - 修正檔案過濾

### 第二輪：邊界條件修復
- 修復 edge cases 測試失敗
- 處理空值、無效輸入
- 增強錯誤處理

### 第三輪：效能測試調整
- 調整效能測試閾值
- 優化測試環境設定
- 處理超時問題

### 第四輪：最終驗證
- 執行完整測試套件
- 確認所有修復有效
- 檢查測試覆蓋率

## 驗證檢查清單

### 每次修復後驗證
- [ ] 執行相關測試確認修復有效
- [ ] 確保不引入新的失敗
- [ ] 型別檢查通過
- [ ] 符合 CLAUDE.md 規範

### 最終驗證
- [ ] 所有測試通過
- [ ] 測試覆蓋率達標（80% 以上）
- [ ] 效能測試穩定
- [ ] 邊界條件處理完善

## 技術原則
根據 CLAUDE.md 規範：
- 錯誤處理使用自定義錯誤類別
- 測試描述使用繁體中文
- TDD 流程：紅燈→綠燈→重構
- 單一職責原則

## 執行順序
1. 先修復核心功能測試（影響最大）
2. 再修復邊界條件測試
3. 最後調整效能測試閾值
4. 完整驗證測試套件